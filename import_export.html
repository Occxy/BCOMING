<!DOCTYPE html>
<html>
  <head>
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Projet EBO-SURSY</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
        
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="css/fontastic.css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.default.premium.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="img/favicon.ico">    
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
    <link rel="stylesheet" href="css/icone.css">
    
    <link rel="stylesheet" href="css/offline_online.css">
    
    <script src="vendor/jquery/jquery.min.js"></script>
    
    <script src="vendor/jquery/jquery.min.js" onload="window.$ = window.jQuery = module.exports;"></script>
	<script>
		delete window.module;
	</script>	
	<!-- Javascript files-->
    <script src="vendor/popper.js/umd/popper.min.js"> </script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="vendor/jquery.cookie/jquery.cookie.js"> </script>    
    <script src="vendor/chart.js/Chart.min.js"></script>
    <script src="vendor/jquery-validation/jquery.validate.min.js"></script>
    <!-- Notifications-->
    <script src="vendor/messenger-hubspot/build/js/messenger.min.js"></script>
    <script src="vendor/messenger-hubspot/build/js/messenger-theme-flat.js"></script>
    <!-- <script src="js/home-premium.js"> </script> -->
    
    <!-- Bootstrap DatePicker-->
    <script src="vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
    <script src="vendor/bootstrap-datepicker/locales/bootstrap-datepicker.fr.min.js" charset="UTF-8"></script>
   
    <!-- Main File-->
    <script src="js/front.js"></script> 
        
    <script src="js/pouchdb.authentication.js"></script> 
    <!-- <script src="js/pouchdb-7.0.0.js"></script> --> 
    <script src="js/pouchdb-6.4.2.min.js"></script> 
    <script src="js/pouchdb.find.js"></script>
    
    <script src="js/function.js"></script>
    <script src="js/menu.js"></script>
    
    <script src="js/loadjs.js"></script>
    
    <script src="js/uuid.js"></script>
    
    <script src="js/load-page-import-export.js"></script>
    
    <script src="js/FileSaver.js"></script>
    
    <script src="js/clock.js"></script>
    
    <script src="node_modules/alasql/dist/alasql.js"></script>
    
  </head>
  <body > 
  <!-- <body> -->
    <script>
		logged_only();
		
		let searchParams = new URLSearchParams(window.location.search);
		nom_table = searchParams.get('table');
		type_table = searchParams.get('type');
		
		
		localStorage['import_table'] = nom_table;
	</script> 
    
    <div class="page">
      <!-- Main Navbar-->
      <header class="header">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
              <!-- Navbar Header-->
              <div class="navbar-header">
                <!-- Navbar Brand --><a href="main.html" class="navbar-brand d-none d-sm-inline-block">
                  <div class="brand-text d-none d-lg-inline-block"><span>BCOMING&nbsp;</span><strong>Project</strong></div>
                  <div class="brand-text d-none d-sm-inline-block d-lg-none"><strong>BC</strong></div></a>
                <!-- Toggle Button--><a id="toggle-btn" href="#" class="menu-btn active"><span></span><span></span><span></span></a>
              </div>
              <!-- Navbar Menu -->
              <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                
                <li class="nav-item d-flex align-items-center">
                  <div class="led-box">
	    		    <div id="led"></div>
	    		    <p id="p_led"></p>
	    		  </div>
	            </li>
	            
                <!-- Logout    -->
                <li class="nav-item"><a href="logout.html" class="nav-link logout">Log out<i class="fa fa-sign-out"></i></a></li>
              </ul>
            </div>
            <div id="child" style="display: none; color: #fff; background: #2f333e;">
    		  <label id="progress_label">Data synchronization...</label>
			  <div class="progress">
  				<div class="progress-bar progress-bar-striped" id="myBar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
			  </div>
			</div>
          </div>
        </nav>
      </header>
      <div class="page-content d-flex align-items-stretch"> 
        <!-- Side Navbar -->
        <nav class="side-navbar">
          <!-- Sidebar Header-->
          <div class="sidebar-header d-flex align-items-center">
            <img src="logos/BCOMING_logo___horizontal_color_tagline_RGB.png" class="img-fluid">
          </div>
          <!-- Sidebar Navidation Menus--><span class="heading">MENU</span>
		  <ul class="list-unstyled">
                    
                    <li id="li_dashboard" name="10"> <a href="main.html"> <i class="a-dashboard"></i></a></li>
                                                                
                    <li id="li_cambodiaDropdown" name="1"> <a id="a_cambodiaDropdown" name="1" href="#ul_cambodiaDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-cambodia"></i><label id="label_cambodia" style="vertical-align: top;">Cambodia </label></a>
                      <ul id="ul_cambodiaDropdown" name="1" class="collapse list-unstyled">
                        <li id="li_camacrossDropdown" name="1" pays="guinee"> <a id="a_camacrossDropdown" name="1" href="#ul_camacrossDropdown" aria-expanded="false" data-toggle="collapse">Cam Across</i> </a>
                       	  <ul id="ul_camacrossDropdown" name="1" pays="guinee" class="collapse list-unstyled">
                            <li id="li_camacross_data_list" name="1"><a href="liste_camacross.html?table=_camacross">data</a></li>                            
	                        <li id="li_camacross_map" name="1"><a href="no_map.html?table=_camacross&type=camacross">map</a></li>
	                        <li id="li_importation_camacross_datas" name="1"><a href="import_export.html?table=_camacross&type=camacross">import/export</a></li>                            
                          </ul>
	                    </li>
	                  </ul>
	                </li>
	                
	                <li id="li_guadeloupeDropdown" name="1"> <a id="a_guadeloupeDropdown" name="1" href="#ul_guadeloupeDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-guadeloupe"></i><label id="label_guadeloupe" style="vertical-align: top;">Guadeloupe </label></a>
                      <ul id="ul_guadeloupeDropdown" name="1" class="collapse list-unstyled">
                        <!--<li id="li_CamAcrossDropdown" name="1" pays="guinee"> <a id="a_CamAcrossDropdown" name="1" href="#ul_CamAcrossDropdown" aria-expanded="false" data-toggle="collapse">Cam Across</i> </a>
                       	  <ul id="ul_CamAcrossDropdown" name="1" pays="guinee" class="collapse list-unstyled">
                            <li id="li_CamAcross_datas_list" name="1"><a href="liste_chauves_souris_capturees.html?table=_transvihmi_guinee">datas</a></li>                            
	                        <li id="li_bat_map_capturees_transvihmi_guinee" name="1"><a href="cartographie.html?table=_transvihmi_guinee&type=chauves_souris_capturees">map</a></li>
	                        <li id="li_importation_CamAcross_datas" name="1"><a href="import_export.html?table=_CamAcross&type=CamAcross">importation/exportation</a></li>                            
                          </ul>
	                    </li>-->
	                  </ul>
	                </li>      
	                
	                <li id="li_ivory_coastDropdown" name="1"> <a id="a_ivory_coastDropdown" name="1" href="#ul_ivory_coastDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-ivory_coast"></i><label id="label_ivory_coast" style="vertical-align: top;">Ivory Coast</label></a>
                      <ul id="ul_ivory_coastDropdown" name="1" class="collapse list-unstyled">
                        <!--<li id="li_CamAcrossDropdown" name="1" pays="guinee"> <a id="a_CamAcrossDropdown" name="1" href="#ul_CamAcrossDropdown" aria-expanded="false" data-toggle="collapse">Cam Across</i> </a>
                       	  <ul id="ul_CamAcrossDropdown" name="1" pays="guinee" class="collapse list-unstyled">
                            <li id="li_CamAcross_datas_list" name="1"><a href="liste_chauves_souris_capturees.html?table=_transvihmi_guinee">datas</a></li>                            
	                        <li id="li_bat_map_capturees_transvihmi_guinee" name="1"><a href="cartographie.html?table=_transvihmi_guinee&type=chauves_souris_capturees">map</a></li>
	                        <li id="li_importation_CamAcross_datas" name="1"><a href="import_export.html?table=_CamAcross&type=CamAcross">importation/exportation</a></li>                            
                          </ul>
	                    </li>-->
	                  </ul>
	                </li>            
	                
	                <li id="li_guineaDropdown" name="1"> <a id="a_guineaDropdown" name="1" href="#ul_guineaDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-guinea"></i><label id="label_guinea" style="vertical-align: top;">Guinea</label></a>
                      <ul id="ul_guineaDropdown" name="1" class="collapse list-unstyled">
                        <!--<li id="li_CamAcrossDropdown" name="1" pays="guinee"> <a id="a_CamAcrossDropdown" name="1" href="#ul_CamAcrossDropdown" aria-expanded="false" data-toggle="collapse">Cam Across</i> </a>
                       	  <ul id="ul_CamAcrossDropdown" name="1" pays="guinee" class="collapse list-unstyled">
                            <li id="li_CamAcross_datas_list" name="1"><a href="liste_chauves_souris_capturees.html?table=_transvihmi_guinee">datas</a></li>                            
	                        <li id="li_bat_map_capturees_transvihmi_guinee" name="1"><a href="cartographie.html?table=_transvihmi_guinee&type=chauves_souris_capturees">map</a></li>
	                        <li id="li_importation_CamAcross_datas" name="1"><a href="import_export.html?table=_CamAcross&type=CamAcross">importation/exportation</a></li>                            
                          </ul>
	                    </li>-->
	                  </ul>
	                </li>   
                    
                    <li id="li_help"> 
                    	<a href="help.html"><i class='a-help'></i></a>
                    </li>
                    
                    <li id="li_sauvegarde" style="display:none"> 
                    	<a href="sauvegarde.html">Sauvegarde mensuelle</a>
                    </li>
                                    
          </ul>
        </nav>
        <div class="content-inner">
          <!-- Page Header-->
          <header class="page-header">
            <div class="container-fluid">
              <h2 class="no-margin-bottom">CamAcross database</h2>
            </div>
          </header>
          
          <section>          
            <div class="container-fluid">              
              <div class="row">                
                <div class="col-lg-12">                  
                  
                  <div class="card">                  
                    <div class="card-header">
                  	  <h4 id="card1">Importation des chauves-souris capturées</h4>
                	</div>
                	<div class="card-body">  
                  	  <div class="row">
                        <div class="col-lg-12">
                          <label id="button_open" class="btn btn-primary btn-fill btn-file">
    						Open the file <input type="file">
						  </label>
						  <label id="file_name" ></label>
						</div>
                      </div>
                      <div class="row" id="success_label" style="display: none;">
                        <div class="col-lg-12">
                          <label id="success" style="color:red;">success</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="card" id="ipg_2" style="display:none;">                  
                    <div class="card-header">
                  	  <h4 id="card4">Importation pour le deuxième jeu de données</h4>
                	</div>
                	<div class="card-body">  
                  	  <div class="row">
                        <div class="col-lg-12">
                          <label id="button_open_2" class="btn btn-primary btn-fill btn-file">
    						Ouvrir le fichier <input type="file">
						  </label>
						  <label id="file_name" ></label>
						</div>
                      </div>
                      <div class="row" id="success_label" style="display: none;">
                        <div class="col-lg-12">
                          <label id="success" style="color:red;">success</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="card">                  
                    <div class="card-header">
                  	  <h4 id="card2">Téléchargement du template des chauves-souris capturées</h4>
                	</div>
                	<div class="card-body">  
                  	  <div class="row">
                        <div class="col-lg-12" id="template">
                          
                          <script type="text/javascript">
			               		var line = document.createElement("div");
			               	   	var file;
				               	if (type_table == 'camacross') {
				     				file = 'CA'
				     			} /*else if ((type_table == 'chauves_souris_capturees') && (localStorage.getItem('export_table') == '_astre_transvihmi_guinee')) {
				     				file = 'CSGU'
				     			} else if ((type_table == 'chauves_souris_non_invasives') && (localStorage.getItem('export_table') != '_astre_transvihmi_guinee')) {
				     				file = 'CINI'
				     			} else if ((type_table == 'chauves_souris_non_invasives') && (localStorage.getItem('export_table') == '_astre_transvihmi_guinee')) {
				     				file = 'NIGU'
				     			} else if (type_table == 'viande_de_brousse') {
				     				file = 'VB'
				     			} else if ((type_table == 'donnees_mission') && (localStorage.getItem('export_table') != '_astre_transvihmi_guinee')) {
				     				file = 'DM'
				     			} else if ((type_table == 'donnees_mission') && (localStorage.getItem('export_table') == '_astre_transvihmi_guinee')) {
				     				file = 'DMGU'
				     			} else if ((type_table == 'donnees_journalieres') && (localStorage.getItem('export_table') != '_astre_transvihmi_guinee')) {
				     				file = 'DJ'
				     			} else if ((type_table == 'donnees_journalieres') && (localStorage.getItem('export_table') == '_astre_transvihmi_guinee')) {
				     				file = 'DJGU'
				     			} else if (type_table == 'animals') {
				     				file = 'MIV'
				     			} else if (type_table == 'caracterisations_grottes') {
				     				file = 'CG'
				     			} else if (type_table == 'cameras_trap') {
				     				file = 'CT'
				     			} else if (type_table == 'faune') {
				     				file = 'FA'
				     			}   */	               		
			               		line.innerHTML = 
			                          '<a id="button_download" class="btn btn-primary btn-fill" href="templates/' +
			                          file + 
			                          '.csv" download>Download</a>'			               		
				          		document.getElementById("template").appendChild(line);
				          </script>
                          
                          <!-- <a id="button_download" class="btn btn-primary btn-fill" href="templates/CICS.csv" download>Télécharger</a> -->
						</div>
                      </div>
                      <div class="row" id="success_label" style="display: none;">
                        <div class="col-lg-12">
                          <label id="success" style="color:red;">success</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="card">                  
                    <div class="card-header">
                  	  <h4 id="card3">Exporter les chauves-souris capturées</h4>
                  	</div>
                  	<div class="card-body">  
                  	  <div class="row">
                        <div class="col-lg-12" id="generate_button">
                          <!-- <label id="button_generate" class="btn btn-primary btn-fill btn-file">
    			  			Générer le fichier
				  		  </label> -->
				  		  
				  		  <script type="text/javascript">
			               		var line = document.createElement("div");
			           			line.innerHTML = 
			                          '<a id="button_generate" href="exportation.html?table=' +
			                          nom_table + '&type=' + type_table +
			                          '" class="btn btn btn-primary btn-fill">Generate the file</a></h4>';			               		
				          		document.getElementById("generate_button").appendChild(line);
				          </script>
                        
				   		</div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- <div class="card">                  
                    <div class="card-header">
                  	  <h4 id="card1">Importation des filets</h4>
                	</div>
                	<div class="card-body">  
                  	  <div class="row">
                        <div class="col-lg-12">
                          <label id="button_open_filets" class="btn btn-primary btn-fill btn-file">
    						Ouvrir le fichier <input type="file">
						  </label>
						  <label id="file_name_filets" ></label>
						</div>
                      </div>
                      <div class="row" id="success_label" style="display: none;">
                        <div class="col-lg-12">
                          <label id="success" style="color:red;">success</label>
                        </div>
                      </div>
                    </div>
                  </div> -->
                  
                  <div class="card" id="interface_publique" style="display: none;">                  
                    <div class="card-header">
                  	  <h4 id="card4">Interface publique</h4>
                  	</div>
                  	<div class="card-body">  
                  	  <div class="row">
                        <div class="col-lg-12">
                          <div class="form-group">
	                        <button id="interface_publique_button_anglais" name="interface_publique_button_anglais" type="submit" class="btn btn-primary btn-fill ladda-button" >                        	
			                  <span class="ladda-label">Générer le fichier pour l'interface publique (anglais)</span>
			                  <span class="ladda-spinner"></span>
				  	        </button>  
				  	      </div> 
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-12">
                          <div class="form-group">
	                        <button id="interface_publique_button_francais" name="interface_publique_button_francais" type="submit" class="btn btn-primary btn-fill ladda-button" >                        	
			                  <span class="ladda-label">Générer le fichier pour l'interface publique (francais)</span>
			                  <span class="ladda-spinner"></span>
				  	        </button>  
				  	      </div> 
                        </div>
                      </div>
                    </div>
                  </div>
                  
                </div>
              </div>  
            </div>
          </section>          
          
          <!-- Page Footer-->
          <footer class="main-footer">
            <div class="container-fluid">
              <div class="row">
                <div class="col-sm-4">
                  <p>Projet EBO-SURSY  2017-2021</p>
                </div>
                <div class="col-sm-4">
                  <p>Conçu par Bruno Rosset - Cirad</p>
                </div>
                <div class="col-sm-4 text-right"> 
                  <p><a href="javascript:ouvre_popup('CGU.html')"><U>CGU</U></a></p>
                </div>
              </div>
            </div>
            <script type="text/javascript">
				function ouvre_popup(page) {
				 window.open(page,"nom_popup","menubar=no, status=no, scrollbars=no, menubar=no, width=640, height=480");
				}
			</script>
          </footer>
        </div>
      </div>
    </div>
    
    <script type="text/javascript">
    	
    	$(document).on('change', '.btn-file :file', function() {
    		var input = $(this),
        	    numFiles = input.get(0).files ? input.get(0).files.length : 1,
        	    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
        	input.trigger('fileselect', [numFiles, label]);
        });

        $(document).ready( function() {
       		$('#button_open :file').on('fileselect', function(event, numFiles, label) {
       			
       			var input = $(this).parents('.input-group').find(':text'),
        	        log = numFiles > 1 ? numFiles + ' files selected' : label;
        	        
        	    var file = event.target.files[0];
        	    var reader = new FileReader();
        	    
        	     reader.onload = function(event) {
        	   		console.log(event.target.result);
        	    	localStorage['file_import'] = event.target.result;
        	    	
        	    	var label =  document.getElementById("file_name");
        	    	label.innerHTML = log;
        	    	
        	    	/*if (type_table == 'chauves_souris_capturees') {
						loadjs('js/importation-chauves-souris-capturees-2.js');
        	    	} else if ((type_table == 'chauves_souris_non_invasives') && (nom_table == '_astre_transvihmi_guinee')) {
            	    	loadjs('js/importation-NI_CS_Grotte_GU.js');
            	    } else if ((type_table == 'chauves_souris_non_invasives') && (nom_table != '_astre_transvihmi_guinee')) {
            	    	loadjs('js/importation-chauves-souris-non-invasives.js');
            	    } else if (type_table == 'viande_de_brousse') {
            	    	loadjs('js/importation-viande-de-brousse.js');
            	    } else if (type_table == 'viande_de_brousse_nhp') {
            	    	loadjs('js/importation-viande-de-brousse-nhp.js');
            	    }  else if (type_table == 'donnees_mission') {
            	    	loadjs('js/importation-donnees-missions.js');
            	    } else if (type_table == 'donnees_journalieres') {
            	    	loadjs('js/importation-donnees-journalieres.js');
            	    } else if (type_table == 'animals') {
            	    	loadjs('js/importation-animal-mivegec.js');
            	    } else if (type_table == 'grands_singes_antilopes') {
            	    	loadjs('js/importation-grands-singes-antilopes.js');
            	    } else if (type_table == 'animals_ipg') {
            	    	loadjs('js/importation-animal-ipg.js');
            	    } else if (type_table == 'caracterisations_grottes') {
            	    	loadjs('js/importation-caracterisations.js');
            	    }  else if (type_table == 'cameras_trap') {
            	    	loadjs('js/importation-cameras-trap.js');
            	    } else if (type_table == 'faune') {
            	    	loadjs('js/importation-faune.js');
            	    }*/
            	    
            	    if (type_table == 'camacross') {
						loadjs('js/importation-CamAcross.js');
        	    	}
        	    };
				reader.readAsText(file, 'ISO-8859-1');
        	    //reader.readAsText(file, 'WINDOWS-1252');
        	    
			});
        });
        
        $(document).ready( function() {
       		$('#button_open_2 :file').on('fileselect', function(event, numFiles, label) {
       			
       			var input = $(this).parents('.input-group').find(':text'),
        	        log = numFiles > 1 ? numFiles + ' files selected' : label;
        	        
        	    var file = event.target.files[0];
        	    var reader = new FileReader();
        	    
        	     reader.onload = function(event) {
        	   		console.log(event.target.result);
        	    	localStorage['file_import'] = event.target.result;
        	    	
        	    	var label =  document.getElementById("file_name");
        	    	label.innerHTML = log;
        	    	
        	    	if (type_table == 'animals_ipg') {
            	    	loadjs('js/importation-animal-ipg-2.js');
            	    }
        	    };
				reader.readAsText(file, 'ISO-8859-1');
        	    //reader.readAsText(file, 'WINDOWS-1252');
        	    
			});
        });
        
        $(document).ready( function() {
       		$('#button_open_filets :file').on('fileselect', function(event, numFiles, label) {
				
       			var debug;
       			if (localStorage.getItem('debug') === null) {
       				debug = '';
       			} else {
       				debug = localStorage.getItem('debug');
       			};
       			
       			var input = $(this).parents('.input-group').find(':text'),
    	        log = numFiles > 1 ? numFiles + ' files selected' : label;
    	        
	    	    var file = event.target.files[0];
	    	    var reader = new FileReader();
	    	    
	    	     reader.onload = function(event) {
	    	   		console.log(event.target.result);
	    	    	localStorage['file_filets'] = event.target.result;
	    	    	
	    	    	var label =  document.getElementById("file_name_filets");
	    	    	label.innerHTML = log;
	    	    	
	    	    	loadjs('js/importation-filets.js');
	    	    	
	    	    	/*if (type_table == 'chauves_souris_capturees') {
						loadjs('js/importation-chauves-souris-capturees.js');
	    	    	} else if (type_table == 'chauves_souris_non_invasives') {
	        	    	loadjs('js/importation-chauves-souris-non-invasives.js');
	        	    } else if (type_table == 'viande_de_brousse') {
	        	    	loadjs('js/importation-viande-de-brousse.js');
	        	    } else if (type_table == 'donnees_mission') {
	        	    	loadjs('js/importation-donnees-missions.js');
	        	    } else if (type_table == 'donnees_journalieres') {
	        	    	loadjs('js/importation-donnees-journalieres.js');
	        	    } else if (type_table == 'animals') {
	        	    	loadjs('js/importation-animal-mivegec.js');
	        	    }*/
	    	    };
				reader.readAsText(file, 'ISO-8859-1');
	    	    
       			/*if (localStorage.getItem('web') === 'oui') {
       				var remote_couchdb = localStorage.getItem('remote_couchdb');
       				var DB = new PouchDB(remote_couchdb + 'donnees_journalieres' + nom_table + debug);
       			} else {
       				var DB = new PouchDB('donnees_journalieres' + nom_table + debug);
       				alert('donnees_journalieres' + nom_table + debug)
       			};
       			DB.allDocs({  		
       				include_docs: true,
       				attachments: true
       			}).then(function (result) {
       				// handle result
       				if (typeof(JSON.stringify(result)) != "undefined"){  
       		    		var donnees_journalieresTablesData = JSON.parse(JSON.stringify(result));
       		    		
       		    		donnees_journalieresTablesData.rows.forEach(function(row){ 
       		    			if (typeof row.doc.FiletCanopee_7 !== 'undefined') {
       			    			row.doc.FiletCanopee_7.forEach(function(row1){ 
       			    				//NumFilet.options[NumFilet.options.length] = new Option(row1.NumFilet, row1.NumFilet + ';' + row1.LongueurFilet + ';' + row1.HauteurFilet + ';' + row1.Lat_degre_decFilet + ';' + row1.LatitudeFilet + ';' + row1.Long_degre_decFilet + ';' + row1.LongitudeFilet); 
       			    				alert(row1.NumFilet)
       			    			});
       		    			};
       		    			if (typeof row.doc.FiletCanopee_20 !== 'undefined') {
       			    			row.doc.FiletCanopee_20.forEach(function(row1){ 
       			    				//NumFilet.options[NumFilet.options.length] = new Option(row1.NumFilet, row1.NumFilet + ';' + row1.LongueurFilet + ';' + row1.HauteurFilet + ';' + row1.Lat_degre_decFilet + ';' + row1.LatitudeFilet + ';' + row1.Long_degre_decFilet + ';' + row1.LongitudeFilet); 
       			    				alert(row1.NumFilet)
       			    			});
       		    			};
       		    			if (typeof row.doc.FiletSol !== 'undefined') {
       			    			row.doc.FiletSol.forEach(function(row1){ 
       			    				//NumFilet.options[NumFilet.options.length] = new Option(row1.NumFilet, row1.NumFilet + ';' + row1.LongueurFilet + ';' + row1.HauteurFilet + ';' + row1.Lat_degre_decFilet + ';' + row1.LatitudeFilet + ';' + row1.Long_degre_decFilet + ';' + row1.LongitudeFilet);
       			    				alert(row1.NumFilet)
       			    			});
       		    			};
       		    		});		
       		    		//Methode_capture.options[Methode_capture.options.length] = new Option("Manquant", "Manquant");
       		    		
       				}
       			}).catch(function (err) {
       				console.log(err);
       			});  */	
       			
       			
			});
        });
        
    </script>
    
	<script type="text/javascript">
	
		document.addEventListener("keydown", function(event) {
		  if (event.keyCode == 13) {
		    event.preventDefault();
		    return false;
		  }
		}, true); // "true" => phase de capture
		
		var institut;
		/*if ((nom_table == '_transvihmi_guinee') || (nom_table == '_transvihmi_cameroun')
			|| (nom_table == '_transvihmi_rdc') || (nom_table == '_transvihmi_gabon')
			|| (nom_table == '_transvihmi_rca') || (nom_table == '_transvihmi_rwanda')) {
			institut = 'transvihmi';			
		} else if ((nom_table == '_mivegec_congo') || (nom_table == '_mivegec_gabon')){
			institut = 'mivegec';
		} else if ((nom_table == '_astre_guinee') || (nom_table == '_astre_congo')
				|| (nom_table == '_astre_gabon')) {
			institut = 'astre';
		} else if (nom_table == '_ipg_guinee') {
			institut = 'ipg';
		} else if (nom_table == '_astre_transvihmi_guinee') {
			institut = 'astre_transvihmi';
		};*/
		
		if ((nom_table == '_camacross') /*|| (nom_table == '_transvihmi_cameroun')
			|| (nom_table == '_transvihmi_rdc') || (nom_table == '_transvihmi_gabon')
			|| (nom_table == '_transvihmi_rca') || (nom_table == '_transvihmi_rwanda')*/) {
			pays = 'cambodia';	
			document.getElementById("card1").innerHTML = "Importing data from CamAcross";
			document.getElementById("card2").innerHTML = "Downloading the CamAcross data template";
			document.getElementById("card3").innerHTML = "Exporting data from CamAcross";
		} /*else if ((nom_table == '_mivegec_congo') || (nom_table == '_mivegec_gabon')){
			institut = 'mivegec';
		} */;
		
		expanded(nom_table);
				
		function expanded(nom_table) {
			var component_li = document.getElementById('li_' + pays + 'Dropdown');
			component_li.classList.add('active');
			var component_a = document.getElementById('a_' + pays + 'Dropdown');
			component_a.setAttribute('aria-expanded', 'true');
			var component_ul =  document.getElementById('ul_' + pays + 'Dropdown');
			component_ul.classList.add('show');
			
			var component_li = document.getElementById('li' + nom_table + 'Dropdown');
			component_li.classList.add('active');
			var component_a = document.getElementById('a' + nom_table + 'Dropdown');
			component_a.setAttribute('aria-expanded', 'true');
			var component_ul =  document.getElementById('ul' + nom_table + 'Dropdown');
			component_ul.classList.add('show');
				
				
			var component_li = document.getElementById('li_importation' + nom_table +'_datas');
			component_li.classList.add('active');
			
			
		};
		
	</script> 
    
 	 <script type="text/javascript">
    	$('#interface_publique_button_anglais').click(function(){
    		
    		localStorage['interface_publique_table'] = nom_table;    		
    		localStorage['type_table'] = type_table;
    		localStorage['version_interface_publique'] = 'anglais';
    		
    		if (type_table == 'chauves_souris_capturees') {
    			loadjs('js/interface-publique-chauves-souris-capturees.js');
        	} else if (type_table == 'chauves_souris_non_invasives') {
            	loadjs('js/interface-publique-chauves-souris-non-invasives.js');
            } else if (type_table == 'viande-de-brousse') {
            	//loadjs('js/interface-publique-viande-de-brousse.js');
            } else if (type_table == 'animals') { 
            	loadjs('js/interface-publique-animals.js');
            } else if (type_table == 'animals_ipg') { 
            	loadjs('js/interface-publique-animals-ipg.js');
            }
		});
    	
		$('#interface_publique_button_francais').click(function(){
    		
    		localStorage['interface_publique_table'] = nom_table;
    		localStorage['type_table'] = type_table;
    		localStorage['version_interface_publique'] = 'francais';
    		
    		if (type_table == 'chauves_souris_capturees') {
    			loadjs('js/interface-publique-chauves-souris-capturees.js');
        	} else if (type_table == 'chauves_souris_non_invasives') {
            	loadjs('js/interface-publique-chauves-souris-non-invasives.js');
            } else if (type_table == 'viande-de-brousse') {
            	//loadjs('js/interface-publique-viande-de-brousse.js');
            } else if (type_table == 'animals') { 
            	loadjs('js/interface-publique-animals.js');
            } else if (type_table == 'animals_ipg') { 
            	loadjs('js/interface-publique-animals-ipg.js');
            }
		});
    	
    	function getYear (str) {
    	    var year = (/\b\d{4}\b/).exec(str);
    	  return year === null ? 'Now' : year[0];
    	}
      </script>  
      
  </body>
</html>
	 